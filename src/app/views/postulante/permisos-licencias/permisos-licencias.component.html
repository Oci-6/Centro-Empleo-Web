<app-formulario></app-formulario>

<div class="p-mt-5">
    <p-card>

        <div class="FormularioComponent-content p-mt-5">
            <p-card>
                <ng-template pTemplate="title">
                    Permisos y Licencias
                </ng-template>

                <!--Experiencias Laborales-->
                <div class="p-fluid p-mb-4" [formGroup]="permisosLicenciasForm">

                    <ng-container formArrayName="permisosLicencias">
                        <p-accordion>

                            <div class="p-fluid p-grid" *ngFor="let PermLicForm of permisosLicencias.controls; let i = index"
                                [formGroupName]="i">

                                <p-accordionTab header="Permiso o Licencia {{i+1}}" class="p-col-12">

                                    <div class="p-fluid p-formgrid p-grid p-ai-end vertical-container">

                                        <div class="p-field p-col-12 p-md-6">
                                            <label for="tipoDocumento">Tipo de documento</label>
                                            <p-dropdown [options]="tipoDocumento" [formControlName]="i+'tipoDocumento'" placeholder="Seleccione un tipo de documento"> 
                                            </p-dropdown>
                                            <div *ngIf="PermLicForm.get(i+'tipoDocumento')?.errors&&submitted" class="invalid-feedback">
                                                <small class="p-error" *ngIf="PermLicForm.get(i+'tipoDocumento')?.errors?.required">Seleccione el tipo de documento</small>
                                            </div>
                                        </div>

                                        <span class="p-field p-col-12 p-md-6">
                                            <label for="vigencia">Vigencia</label>
                                            <p-calendar inputId="vigencia" [formControlName]="i+'vigencia'"
                                                dateFormat="dd/mm/yy"></p-calendar>
                                            <div *ngIf="PermLicForm.get(i+'vigencia')?.errors&&submitted" class="invalid-feedback">
                                                <small class="p-error" *ngIf="PermLicForm.get(i+'vigencia')?.errors?.required">Seleccione la fecha de vigencia del documento</small>
                                            </div>
                                        </span>
                                        
                                        <div class="p-field p-col-12 p-md-6" *ngIf="tipoDocumentoEspecificacion(i,PermLicForm)">
                                            <label for="especificacion">Especificacion</label>
                                            <input id="especificacion" type="text" required pInputText
                                                [formControlName]="i+'especificacion'">
                                            <div *ngIf="PermLicForm.get(i+'especificacion')?.errors&&submitted" class="invalid-feedback">
                                                <small class="p-error" *ngIf="PermLicForm.get(i+'especificacion')?.errors?.required">Ingrese la especificaci√≥n del documento</small>
                                            </div>
                                        </div>

                                        <!-- <button pButton pRipple type="button" class="p-button-rounded" (onClick)="deleteCapFor(i)" icon="pi pi-trash"></button> -->
                                        <div class="p-field p-col-12 p-md-6">
                                            <p-button (onClick)="deletePermLic(i)" icon="pi pi-trash"></p-button>
                                        </div>

                                        <!-- <p-divider class="p-col-12"></p-divider> -->
                                    </div>
                                </p-accordionTab>
                            </div>
                        </p-accordion>


                    </ng-container>


                    <!-- <p-button label="Prueba" (onClick)="submit()" icon="pi pi-minus"></p-button> -->
                    <p-button label="Agregar Permiso o Licencia" (onClick)="addPermLic()" icon="pi pi-plus">
                    </p-button>

                </div>

                <ng-template pTemplate="footer">
                    <div class="p-grid p-nogutter p-justify-between">
                        <p-button label="Back" (onClick)="prevPage()" icon="pi pi-angle-left"></p-button>
                        <p-button label="Next" (onClick)="nextPage()" icon="pi pi-angle-right" iconPos="right">
                        </p-button>
                        <!-- <p-button label="Guardar" (onClick)="ngOnSubmit()" icon="pi pi-plus" iconPos="right"></p-button> -->
                    </div>
                </ng-template>

            </p-card>
        </div>

    </p-card>
</div>

<p-confirmDialog [style]="{width: '50vw'}" [baseZIndex]="10000" rejectButtonStyleClass="p-button-outlined"></p-confirmDialog>
